{"version":3,"file":"modifiers.cjs","sources":["../../src/core/modifiers.ts"],"sourcesContent":["import { ChalkeeBase } from './ChalkeeBase'\r\nimport { createStyleState } from \"./styler\"\r\nimport { type Chalkee, createStyledFunction } from './Chalkee'\r\nimport { setModifierLookup } from './styler'\r\n\r\n// ANSI modifier codes\r\nexport const ANSI_MODIFIERS: Record<string, number> = {\r\n    reset: 0,\r\n    bold: 1,\r\n    dim: 2,\r\n    italic: 3,\r\n    underline: 4,\r\n    inverse: 7,\r\n    hidden: 8,\r\n    strikethrough: 9,\r\n}\r\n\r\n/**\r\n * Get ANSI code for a modifier\r\n * @param modifierName The name of the modifier\r\n * @returns The ANSI modifier code or undefined if not found\r\n */\r\nexport function getModifier(modifierName: string): number | undefined {\r\n    return ANSI_MODIFIERS[modifierName]\r\n}\r\n\r\n// Register the modifier lookup function with the styler to break circular dependency\r\nsetModifierLookup(getModifier)\r\n\r\n// Extend the ChalkeeBase interface with modifier methods\r\ndeclare module './ChalkeeBase' {\r\n    interface ChalkeeBase {\r\n        // Modifiers\r\n        bold: Chalkee\r\n        dim: Chalkee\r\n        italic: Chalkee\r\n        underline: Chalkee\r\n        strikethrough: Chalkee\r\n        inverse: Chalkee\r\n        hidden: Chalkee\r\n\r\n        // Shorthand aliases\r\n        b: Chalkee // bold\r\n        d: Chalkee // dim\r\n        i: Chalkee // italic\r\n        u: Chalkee // underline\r\n        s: Chalkee // strikethrough\r\n        r: Chalkee // reset\r\n\r\n        // Special methods\r\n        hex: (color: string) => Chalkee\r\n        rgb: (r: number, g: number, b: number) => Chalkee\r\n        bgHex: (color: string) => Chalkee\r\n        bgRgb: (r: number, g: number, b: number) => Chalkee\r\n        bg: Chalkee // background mode\r\n        as: Chalkee // auto-spacing\r\n\r\n        // Reset\r\n        reset: Chalkee\r\n\r\n        // Utils methods\r\n        createBgMode(): Chalkee\r\n\r\n        // Callable-helpers methods\r\n        createColor(colorName: string, text?: string): Chalkee\r\n        createModifier(modifier: string): Chalkee\r\n    }\r\n}\r\n\r\n// Helper function to define modifier properties that create new instances\r\nconst defineModifierInstanceProperty = (name: string, creatorMethod: string) => {\r\n    Object.defineProperty(ChalkeeBase.prototype, name, {\r\n        get: function (this: Chalkee) {\r\n            // @ts-ignore\r\n            return this[creatorMethod](name)\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    })\r\n}\r\n\r\n// Helper function to define alias properties\r\nconst defineAliasProperty = (name: string, aliasedProperty: string) => {\r\n    Object.defineProperty(ChalkeeBase.prototype, name, {\r\n        get: function (this: Chalkee) {\r\n            // @ts-ignore\r\n            return this[aliasedProperty]\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    })\r\n}\r\n\r\n// Helper function to define special instance properties\r\nconst defineSpecialInstanceProperty = (name: string, creatorMethod: string) => {\r\n    Object.defineProperty(ChalkeeBase.prototype, name, {\r\n        get: function (this: Chalkee) {\r\n            // @ts-ignore\r\n            return this[creatorMethod]()\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    })\r\n}\r\n\r\n// Helper function to define value properties (methods that take parameters)\r\nconst defineValueProperty = (name: string, creatorMethod: string) => {\r\n    Object.defineProperty(ChalkeeBase.prototype, name, {\r\n        get: function (this: Chalkee) {\r\n            // @ts-ignore\r\n            return (...args: any[]) => this[creatorMethod](...args)\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    })\r\n}\r\n\r\n// Attach modifier methods to ChalkeeBase prototype\r\nfunction attachModifierMethods(ChalkeeBaseClass: typeof ChalkeeBase) {\r\n    // Core modifier methods\r\n    const modifiers = ['bold', 'dim', 'italic', 'underline', 'strikethrough', 'inverse', 'hidden']\r\n    for (const modifier of modifiers) {\r\n        defineModifierInstanceProperty(modifier, 'createModifier')\r\n    }\r\n\r\n    // Shorthand aliases\r\n    defineAliasProperty('b', 'bold')\r\n    defineAliasProperty('d', 'dim')\r\n    defineAliasProperty('i', 'italic')\r\n    defineAliasProperty('u', 'underline')\r\n    defineAliasProperty('s', 'strikethrough')\r\n\r\n    // Reset method\r\n    defineSpecialInstanceProperty('reset', 'createReset')\r\n    defineAliasProperty('r', 'reset')\r\n\r\n    // Special methods\r\n    defineSpecialInstanceProperty('as', 'createAutoSpacing')\r\n\r\n    // Background mode method with debug log (kept as explicit definition due to debug log)\r\n    Object.defineProperty(ChalkeeBase.prototype, 'bg', {\r\n        get: function (this: Chalkee) {\r\n            return this.createBgMode()\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    })\r\n\r\n    // Color methods that take parameters\r\n    defineValueProperty('hex', 'createHexColor')\r\n    defineValueProperty('rgb', 'createRgbColor')\r\n    defineValueProperty('bgHex', 'createBgHexColor')\r\n    defineValueProperty('bgRgb', 'createBgRgbColor')\r\n}\r\n\r\n// Automatically attach the methods when this module is imported\r\nattachModifierMethods(ChalkeeBase)\r\n\r\n// Create the empty state once and reuse it throughout the module\r\nconst emptyState = createStyleState()\r\n\r\n// Export modifier methods - reuse emptyState\r\n// @ts-ignore - bold, dim, etc. are augmented at runtime via module extension\r\nexport const bold = createStyledFunction('', emptyState).bold\r\nexport const dim = createStyledFunction('', emptyState).dim\r\nexport const italic = createStyledFunction('', emptyState).italic\r\nexport const underline = createStyledFunction('', emptyState).underline\r\nexport const strikethrough = createStyledFunction('', emptyState).strikethrough\r\nexport const inverse = createStyledFunction('', emptyState).inverse\r\nexport const hidden = createStyledFunction('', emptyState).hidden\r\nexport const reset = createStyledFunction('', emptyState).reset\r\n\r\n// Export shorthand aliases\r\nexport const b = createStyledFunction('', emptyState).b\r\nexport const d = createStyledFunction('', emptyState).d\r\nexport const i = createStyledFunction('', emptyState).i\r\nexport const u = createStyledFunction('', emptyState).u\r\nexport const s = createStyledFunction('', emptyState).s\r\nexport const r = createStyledFunction('', emptyState).r\r\n\r\n// Export special methods\r\nexport const as = createStyledFunction('', emptyState).as\r\nexport const bg = createStyledFunction('', emptyState).bg\r\n\r\n// Export hex and RGB methods\r\nexport const hex = createStyledFunction('', emptyState).hex\r\nexport const rgb = createStyledFunction('', emptyState).rgb\r\nexport const bgHex = createStyledFunction('', emptyState).bgHex\r\nexport const bgRgb = createStyledFunction('', emptyState).bgRgb\r\n"],"names":["ANSI_MODIFIERS","getModifier","modifierName","setModifierLookup","defineModifierInstanceProperty","name","creatorMethod","ChalkeeBase","defineAliasProperty","aliasedProperty","defineSpecialInstanceProperty","defineValueProperty","args","attachModifierMethods","ChalkeeBaseClass","modifiers","modifier","emptyState","createStyleState","bold","createStyledFunction","dim","italic","underline","strikethrough","inverse","hidden","reset","b","d","i","u","s","r","as","bg","hex","rgb","bgHex","bgRgb"],"mappings":"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"}