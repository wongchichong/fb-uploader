{"version":3,"file":"ChalkeeBase.mjs","sources":["../../src/core/ChalkeeBase.ts"],"sourcesContent":["// Get the inspect.custom symbol once at module level (safe for browser/node environments)\r\n// Handle the case where util.inspect.custom is not available\r\n// Try to detect Node.js environment more robustly without importing util\r\nconst customInspectSymbol = (() => {\r\n    // Try to detect Node.js environment and get the symbol\r\n    // biome-ignore lint: intentional use of global variable\r\n    if (typeof (global as any) !== 'undefined' || (typeof (globalThis as any) !== 'undefined' && (globalThis as any).process?.versions?.node)) {\r\n        try {\r\n            // Use dynamic import to avoid bundling issues\r\n            // biome-ignore lint: intentional dynamic import\r\n            const nodeUtil = (globalThis as any).require ? (globalThis as any).require('util') : undefined\r\n            return nodeUtil?.inspect?.custom\r\n        } catch (e) {\r\n            // Ignore and fall back to undefined\r\n        }\r\n    }\r\n\r\n    return undefined\r\n})()\r\n\r\nexport class ChalkeeBase {\r\n    static noColor: boolean = false\r\n    // State properties (public to match interface augmentation)\r\n    _state: any\r\n    _accumulatedText: string = ''\r\n    _isInBgMode?: boolean\r\n\r\n    // String conversion methods\r\n    toString(): string {\r\n        // If noColor is enabled, strip ANSI codes from accumulated text\r\n        if (ChalkeeBase.noColor) {\r\n            return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n        }\r\n        return this._accumulatedText\r\n    }\r\n\r\n    valueOf(): string {\r\n        // If noColor is enabled, strip ANSI codes from accumulated text\r\n        if (ChalkeeBase.noColor) {\r\n            return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n        }\r\n        return this._accumulatedText\r\n    }\r\n\r\n    get noColor(): boolean {\r\n        return ChalkeeBase.noColor\r\n    }\r\n    set noColor(value: boolean) {\r\n        ChalkeeBase.noColor = value\r\n    }\r\n}\r\n\r\n// Add custom inspect method dynamically if symbol is available\r\nif (customInspectSymbol) {\r\n    Object.defineProperty(ChalkeeBase.prototype, customInspectSymbol, {\r\n        value: function (depth?: number, options?: any, inspect?: any): string {\r\n            // If noColor is enabled, strip ANSI codes from accumulated text\r\n            if (ChalkeeBase.noColor) {\r\n                return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n            }\r\n            return this._accumulatedText\r\n        },\r\n        writable: true,\r\n        enumerable: false,\r\n        configurable: true\r\n    })\r\n}"],"names":["customInspectSymbol","_a","_b","_c","nodeUtil","_ChalkeeBase","value","ChalkeeBase","depth","options","inspect"],"mappings":"AAGA,MAAMA,KAAuB,MAAM;AAAnC,MAAAC,GAAAC,GAAAC;AAGI,MAAI,OAAQ,SAAmB,OAAgB,OAAQ,aAAuB,SAAgBD,KAAAD,IAAA,WAAmB,YAAnB,gBAAAA,EAA4B,aAA5B,QAAAC,EAAsC;AAChI,QAAI;AAGA,YAAME,IAAY,WAAmB,UAAW,WAAmB,QAAQ,MAAM,IAAI;AACrF,cAAOD,IAAAC,KAAA,gBAAAA,EAAU,YAAV,gBAAAD,EAAmB;AAAA,IAC9B,QAAY;AAAA,IAEZ;AAIR,GAAA,GAEaE,IAAN,MAAMA,EAAY;AAAA,EAAlB,cAAA;AAIH,SAAA,mBAA2B;AAAA,EAAA;AAAA;AAAA,EAI3B,WAAmB;AAEf,WAAIA,EAAY,UACL,KAAK,iBAAiB,QAAQ,mBAAmB,EAAE,IAEvD,KAAK;AAAA,EAChB;AAAA,EAEA,UAAkB;AAEd,WAAIA,EAAY,UACL,KAAK,iBAAiB,QAAQ,mBAAmB,EAAE,IAEvD,KAAK;AAAA,EAChB;AAAA,EAEA,IAAI,UAAmB;AACnB,WAAOA,EAAY;AAAA,EACvB;AAAA,EACA,IAAI,QAAQC,GAAgB;AACxB,IAAAD,EAAY,UAAUC;AAAA,EAC1B;AACJ;AA7BID,EAAO,UAAmB;AADvB,IAAME,IAANF;AAiCHL,KACA,OAAO,eAAeO,EAAY,WAAWP,GAAqB;AAAA,EAC9D,OAAO,SAAUQ,GAAgBC,GAAeC,GAAuB;AAEnE,WAAIH,EAAY,UACL,KAAK,iBAAiB,QAAQ,mBAAmB,EAAE,IAEvD,KAAK;AAAA,EAChB;AAAA,EACA,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,cAAc;AAAA,CACjB;"}