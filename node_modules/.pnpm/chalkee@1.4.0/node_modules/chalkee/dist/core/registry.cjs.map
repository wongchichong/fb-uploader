{"version":3,"file":"registry.cjs","sources":["../../src/core/registry.ts"],"sourcesContent":["/**\r\n * Color registry for managing ANSI color codes\r\n */\r\n\r\nimport { ColorDefinition } from '../types'\r\n\r\n// ANSI color codes\r\nexport const ANSI_COLORS: Record<string, ColorDefinition> = {\r\n    // Foreground colors\r\n    black: { name: 'black', ansiCode: 30, type: 'foreground' },\r\n    red: { name: 'red', ansiCode: 31, type: 'foreground' },\r\n    green: { name: 'green', ansiCode: 32, type: 'foreground' },\r\n    yellow: { name: 'yellow', ansiCode: 33, type: 'foreground' },\r\n    blue: { name: 'blue', ansiCode: 34, type: 'foreground' },\r\n    magenta: { name: 'magenta', ansiCode: 35, type: 'foreground' },\r\n    cyan: { name: 'cyan', ansiCode: 36, type: 'foreground' },\r\n    white: { name: 'white', ansiCode: 37, type: 'foreground' },\r\n    blackBright: { name: 'blackBright', ansiCode: 90, type: 'foreground' },\r\n    redBright: { name: 'redBright', ansiCode: 91, type: 'foreground' },\r\n    greenBright: { name: 'greenBright', ansiCode: 92, type: 'foreground' },\r\n    yellowBright: { name: 'yellowBright', ansiCode: 93, type: 'foreground' },\r\n    blueBright: { name: 'blueBright', ansiCode: 94, type: 'foreground' },\r\n    magentaBright: { name: 'magentaBright', ansiCode: 95, type: 'foreground' },\r\n    cyanBright: { name: 'cyanBright', ansiCode: 96, type: 'foreground' },\r\n    whiteBright: { name: 'whiteBright', ansiCode: 97, type: 'foreground' },\r\n\r\n    // Background colors\r\n    bgBlack: { name: 'bgBlack', ansiCode: 40, type: 'background' },\r\n    bgRed: { name: 'bgRed', ansiCode: 41, type: 'background' },\r\n    bgGreen: { name: 'bgGreen', ansiCode: 42, type: 'background' },\r\n    bgYellow: { name: 'bgYellow', ansiCode: 43, type: 'background' },\r\n    bgBlue: { name: 'bgBlue', ansiCode: 44, type: 'background' },\r\n    bgMagenta: { name: 'bgMagenta', ansiCode: 45, type: 'background' },\r\n    bgCyan: { name: 'bgCyan', ansiCode: 46, type: 'background' },\r\n    bgWhite: { name: 'bgWhite', ansiCode: 47, type: 'background' },\r\n    bgBlackBright: { name: 'bgBlackBright', ansiCode: 100, type: 'background' },\r\n    bgRedBright: { name: 'bgRedBright', ansiCode: 101, type: 'background' },\r\n    bgGreenBright: { name: 'bgGreenBright', ansiCode: 102, type: 'background' },\r\n    bgYellowBright: { name: 'bgYellowBright', ansiCode: 103, type: 'background' },\r\n    bgBlueBright: { name: 'bgBlueBright', ansiCode: 104, type: 'background' },\r\n    bgMagentaBright: { name: 'bgMagentaBright', ansiCode: 105, type: 'background' },\r\n    bgCyanBright: { name: 'bgCyanBright', ansiCode: 106, type: 'background' },\r\n    bgWhiteBright: { name: 'bgWhiteBright', ansiCode: 107, type: 'background' },\r\n}\r\n\r\n/**\r\n * Get ANSI code for a color\r\n * @param colorName The name of the color\r\n * @returns The ANSI color definition or undefined if not found\r\n */\r\nconst colorCache = new Map<string, ColorDefinition | undefined>()\r\nexport function getColor(colorName: string): ColorDefinition | undefined {\r\n    // Check cache first\r\n    if (colorCache.has(colorName)) {\r\n        return colorCache.get(colorName)\r\n    }\r\n\r\n    const color = ANSI_COLORS[colorName]\r\n    colorCache.set(colorName, color)\r\n    return color\r\n}\r\n\r\n/**\r\n * Parse a hex color string to RGB values\r\n * @param hex The hex color string (e.g., '#ff0000')\r\n * @returns RGB values as an array [r, g, b]\r\n */\r\nexport function parseHex(hex: string): [number, number, number] {\r\n    // Remove # if present\r\n    const cleanedHex = hex.replace('#', '')\r\n\r\n    // Handle 3-digit hex (e.g., #f00)\r\n    if (cleanedHex.length === 3) {\r\n        const r = parseInt(cleanedHex[0] + cleanedHex[0], 16)\r\n        const g = parseInt(cleanedHex[1] + cleanedHex[1], 16)\r\n        const b = parseInt(cleanedHex[2] + cleanedHex[2], 16)\r\n        return [r, g, b]\r\n    }\r\n\r\n    // Handle 6-digit hex (e.g., #ff0000)\r\n    if (cleanedHex.length === 6) {\r\n        const r = parseInt(cleanedHex.substring(0, 2), 16)\r\n        const g = parseInt(cleanedHex.substring(2, 4), 16)\r\n        const b = parseInt(cleanedHex.substring(4, 6), 16)\r\n        return [r, g, b]\r\n    }\r\n\r\n    // Default to black if invalid\r\n    return [0, 0, 0]\r\n}\r\n\r\n/**\r\n * Convert RGB values to the closest ANSI 256 color\r\n * @param r Red value (0-255)\r\n * @param g Green value (0-255)\r\n * @param b Blue value (0-255)\r\n * @returns The ANSI 256 color code\r\n */\r\nexport function rgbToAnsi256(r: number, g: number, b: number): number {\r\n    // If all values are equal, use grayscale\r\n    if (r === g && g === b) {\r\n        if (r < 8) return 16\r\n        if (r > 248) return 231\r\n        return Math.round(((r - 8) / 247) * 24) + 232\r\n    }\r\n\r\n    // Otherwise, use color cube\r\n    const red = Math.round((r / 255) * 5)\r\n    const green = Math.round((g / 255) * 5)\r\n    const blue = Math.round((b / 255) * 5)\r\n\r\n    return 16 + (36 * red) + (6 * green) + blue\r\n}   "],"names":["ANSI_COLORS","colorCache","getColor","colorName","color","parseHex","hex","cleanedHex","g","b","rgbToAnsi256","r","red","green","blue"],"mappings":"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"}