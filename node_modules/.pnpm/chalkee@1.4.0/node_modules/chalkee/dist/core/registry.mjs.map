{"version":3,"file":"registry.mjs","sources":["../../src/core/registry.ts"],"sourcesContent":["/**\r\n * Color registry for managing ANSI color codes\r\n */\r\n\r\nimport { ColorDefinition } from '../types'\r\n\r\n// ANSI color codes\r\nexport const ANSI_COLORS: Record<string, ColorDefinition> = {\r\n    // Foreground colors\r\n    black: { name: 'black', ansiCode: 30, type: 'foreground' },\r\n    red: { name: 'red', ansiCode: 31, type: 'foreground' },\r\n    green: { name: 'green', ansiCode: 32, type: 'foreground' },\r\n    yellow: { name: 'yellow', ansiCode: 33, type: 'foreground' },\r\n    blue: { name: 'blue', ansiCode: 34, type: 'foreground' },\r\n    magenta: { name: 'magenta', ansiCode: 35, type: 'foreground' },\r\n    cyan: { name: 'cyan', ansiCode: 36, type: 'foreground' },\r\n    white: { name: 'white', ansiCode: 37, type: 'foreground' },\r\n    blackBright: { name: 'blackBright', ansiCode: 90, type: 'foreground' },\r\n    redBright: { name: 'redBright', ansiCode: 91, type: 'foreground' },\r\n    greenBright: { name: 'greenBright', ansiCode: 92, type: 'foreground' },\r\n    yellowBright: { name: 'yellowBright', ansiCode: 93, type: 'foreground' },\r\n    blueBright: { name: 'blueBright', ansiCode: 94, type: 'foreground' },\r\n    magentaBright: { name: 'magentaBright', ansiCode: 95, type: 'foreground' },\r\n    cyanBright: { name: 'cyanBright', ansiCode: 96, type: 'foreground' },\r\n    whiteBright: { name: 'whiteBright', ansiCode: 97, type: 'foreground' },\r\n\r\n    // Background colors\r\n    bgBlack: { name: 'bgBlack', ansiCode: 40, type: 'background' },\r\n    bgRed: { name: 'bgRed', ansiCode: 41, type: 'background' },\r\n    bgGreen: { name: 'bgGreen', ansiCode: 42, type: 'background' },\r\n    bgYellow: { name: 'bgYellow', ansiCode: 43, type: 'background' },\r\n    bgBlue: { name: 'bgBlue', ansiCode: 44, type: 'background' },\r\n    bgMagenta: { name: 'bgMagenta', ansiCode: 45, type: 'background' },\r\n    bgCyan: { name: 'bgCyan', ansiCode: 46, type: 'background' },\r\n    bgWhite: { name: 'bgWhite', ansiCode: 47, type: 'background' },\r\n    bgBlackBright: { name: 'bgBlackBright', ansiCode: 100, type: 'background' },\r\n    bgRedBright: { name: 'bgRedBright', ansiCode: 101, type: 'background' },\r\n    bgGreenBright: { name: 'bgGreenBright', ansiCode: 102, type: 'background' },\r\n    bgYellowBright: { name: 'bgYellowBright', ansiCode: 103, type: 'background' },\r\n    bgBlueBright: { name: 'bgBlueBright', ansiCode: 104, type: 'background' },\r\n    bgMagentaBright: { name: 'bgMagentaBright', ansiCode: 105, type: 'background' },\r\n    bgCyanBright: { name: 'bgCyanBright', ansiCode: 106, type: 'background' },\r\n    bgWhiteBright: { name: 'bgWhiteBright', ansiCode: 107, type: 'background' },\r\n}\r\n\r\n/**\r\n * Get ANSI code for a color\r\n * @param colorName The name of the color\r\n * @returns The ANSI color definition or undefined if not found\r\n */\r\nconst colorCache = new Map<string, ColorDefinition | undefined>()\r\nexport function getColor(colorName: string): ColorDefinition | undefined {\r\n    // Check cache first\r\n    if (colorCache.has(colorName)) {\r\n        return colorCache.get(colorName)\r\n    }\r\n\r\n    const color = ANSI_COLORS[colorName]\r\n    colorCache.set(colorName, color)\r\n    return color\r\n}\r\n\r\n/**\r\n * Parse a hex color string to RGB values\r\n * @param hex The hex color string (e.g., '#ff0000')\r\n * @returns RGB values as an array [r, g, b]\r\n */\r\nexport function parseHex(hex: string): [number, number, number] {\r\n    // Remove # if present\r\n    const cleanedHex = hex.replace('#', '')\r\n\r\n    // Handle 3-digit hex (e.g., #f00)\r\n    if (cleanedHex.length === 3) {\r\n        const r = parseInt(cleanedHex[0] + cleanedHex[0], 16)\r\n        const g = parseInt(cleanedHex[1] + cleanedHex[1], 16)\r\n        const b = parseInt(cleanedHex[2] + cleanedHex[2], 16)\r\n        return [r, g, b]\r\n    }\r\n\r\n    // Handle 6-digit hex (e.g., #ff0000)\r\n    if (cleanedHex.length === 6) {\r\n        const r = parseInt(cleanedHex.substring(0, 2), 16)\r\n        const g = parseInt(cleanedHex.substring(2, 4), 16)\r\n        const b = parseInt(cleanedHex.substring(4, 6), 16)\r\n        return [r, g, b]\r\n    }\r\n\r\n    // Default to black if invalid\r\n    return [0, 0, 0]\r\n}\r\n\r\n/**\r\n * Convert RGB values to the closest ANSI 256 color\r\n * @param r Red value (0-255)\r\n * @param g Green value (0-255)\r\n * @param b Blue value (0-255)\r\n * @returns The ANSI 256 color code\r\n */\r\nexport function rgbToAnsi256(r: number, g: number, b: number): number {\r\n    // If all values are equal, use grayscale\r\n    if (r === g && g === b) {\r\n        if (r < 8) return 16\r\n        if (r > 248) return 231\r\n        return Math.round(((r - 8) / 247) * 24) + 232\r\n    }\r\n\r\n    // Otherwise, use color cube\r\n    const red = Math.round((r / 255) * 5)\r\n    const green = Math.round((g / 255) * 5)\r\n    const blue = Math.round((b / 255) * 5)\r\n\r\n    return 16 + (36 * red) + (6 * green) + blue\r\n}   "],"names":["ANSI_COLORS","colorCache","getColor","colorName","color","parseHex","hex","cleanedHex","g","b","rgbToAnsi256","r","red","green","blue"],"mappings":"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"}