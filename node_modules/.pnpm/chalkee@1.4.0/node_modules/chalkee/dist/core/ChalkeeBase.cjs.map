{"version":3,"file":"ChalkeeBase.cjs","sources":["../../src/core/ChalkeeBase.ts"],"sourcesContent":["// Get the inspect.custom symbol once at module level (safe for browser/node environments)\r\n// Handle the case where util.inspect.custom is not available\r\n// Try to detect Node.js environment more robustly without importing util\r\nconst customInspectSymbol = (() => {\r\n    // Try to detect Node.js environment and get the symbol\r\n    // biome-ignore lint: intentional use of global variable\r\n    if (typeof (global as any) !== 'undefined' || (typeof (globalThis as any) !== 'undefined' && (globalThis as any).process?.versions?.node)) {\r\n        try {\r\n            // Use dynamic import to avoid bundling issues\r\n            // biome-ignore lint: intentional dynamic import\r\n            const nodeUtil = (globalThis as any).require ? (globalThis as any).require('util') : undefined\r\n            return nodeUtil?.inspect?.custom\r\n        } catch (e) {\r\n            // Ignore and fall back to undefined\r\n        }\r\n    }\r\n\r\n    return undefined\r\n})()\r\n\r\nexport class ChalkeeBase {\r\n    static noColor: boolean = false\r\n    // State properties (public to match interface augmentation)\r\n    _state: any\r\n    _accumulatedText: string = ''\r\n    _isInBgMode?: boolean\r\n\r\n    // String conversion methods\r\n    toString(): string {\r\n        // If noColor is enabled, strip ANSI codes from accumulated text\r\n        if (ChalkeeBase.noColor) {\r\n            return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n        }\r\n        return this._accumulatedText\r\n    }\r\n\r\n    valueOf(): string {\r\n        // If noColor is enabled, strip ANSI codes from accumulated text\r\n        if (ChalkeeBase.noColor) {\r\n            return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n        }\r\n        return this._accumulatedText\r\n    }\r\n\r\n    get noColor(): boolean {\r\n        return ChalkeeBase.noColor\r\n    }\r\n    set noColor(value: boolean) {\r\n        ChalkeeBase.noColor = value\r\n    }\r\n}\r\n\r\n// Add custom inspect method dynamically if symbol is available\r\nif (customInspectSymbol) {\r\n    Object.defineProperty(ChalkeeBase.prototype, customInspectSymbol, {\r\n        value: function (depth?: number, options?: any, inspect?: any): string {\r\n            // If noColor is enabled, strip ANSI codes from accumulated text\r\n            if (ChalkeeBase.noColor) {\r\n                return this._accumulatedText.replace(/\\x1b\\[[0-9;]*m/g, '')\r\n            }\r\n            return this._accumulatedText\r\n        },\r\n        writable: true,\r\n        enumerable: false,\r\n        configurable: true\r\n    })\r\n}"],"names":["customInspectSymbol","_b","_a","nodeUtil","_c","_ChalkeeBase","value","ChalkeeBase","depth","options","inspect"],"mappings":"gFAGA,MAAMA,GAAuB,IAAM,WAG/B,GAAI,OAAQ,OAAmB,KAAgB,OAAQ,WAAuB,OAAgBC,GAAAC,EAAA,WAAmB,UAAnB,YAAAA,EAA4B,WAA5B,MAAAD,EAAsC,MAChI,GAAI,CAGA,MAAME,EAAY,WAAmB,QAAW,WAAmB,QAAQ,MAAM,EAAI,OACrF,OAAOC,EAAAD,GAAA,YAAAA,EAAU,UAAV,YAAAC,EAAmB,MAC9B,MAAY,CAEZ,CAIR,GAAA,EAEaC,EAAN,MAAMA,CAAY,CAAlB,aAAA,CAIH,KAAA,iBAA2B,EAAA,CAI3B,UAAmB,CAEf,OAAIA,EAAY,QACL,KAAK,iBAAiB,QAAQ,kBAAmB,EAAE,EAEvD,KAAK,gBAChB,CAEA,SAAkB,CAEd,OAAIA,EAAY,QACL,KAAK,iBAAiB,QAAQ,kBAAmB,EAAE,EAEvD,KAAK,gBAChB,CAEA,IAAI,SAAmB,CACnB,OAAOA,EAAY,OACvB,CACA,IAAI,QAAQC,EAAgB,CACxBD,EAAY,QAAUC,CAC1B,CACJ,EA7BID,EAAO,QAAmB,GADvB,IAAME,EAANF,EAiCHL,GACA,OAAO,eAAeO,EAAY,UAAWP,EAAqB,CAC9D,MAAO,SAAUQ,EAAgBC,EAAeC,EAAuB,CAEnE,OAAIH,EAAY,QACL,KAAK,iBAAiB,QAAQ,kBAAmB,EAAE,EAEvD,KAAK,gBAChB,EACA,SAAU,GACV,WAAY,GACZ,aAAc,EAAA,CACjB"}